{
  "name": "Flutter Manual Install Dev Container",
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu", // Use the working base Ubuntu image

  "features": {
      // Use common-utils to ensure git is installed and packages are updated
      "ghcr.io/devcontainers/features/common-utils:2": {
          "installZsh": "false",
          "installOhMyZsh": "false",
          "username": "vscode",
          "uid": "1000",
          "gid": "1000",
          "upgradePackages": "true",
          "configureGo": "false"
      }
  },

  // UPDATED postCreateCommand: Clones Flutter into /workspaces/flutter-sdk
  "postCreateCommand": "sudo apt-get update && sudo apt-get install -y libstdc++6 zlib1g && git clone https://github.com/flutter/flutter.git --depth 1 --branch stable /workspaces/flutter-sdk && echo 'export PATH=\"$PATH:/workspaces/flutter-sdk/bin\"' >> ~/.bashrc",

  "customizations": {
    "vscode": {
      "extensions": [
        "Dart-Code.flutter",
        "Dart-Code.dart-code"
      ]
    }
  },
  "terminal.integrated.defaultProfile.linux": "bash",
  "terminal.integrated.profiles.linux": {
    "bash": {
      "path": "/bin/bash"
    }
  }
}